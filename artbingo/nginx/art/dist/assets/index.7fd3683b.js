var t,e,s=(t,e,s)=>new Promise(((l,i)=>{var a=t=>{try{n(s.next(t))}catch(e){i(e)}},r=t=>{try{n(s.throw(t))}catch(e){i(e)}},n=t=>t.done?l(t.value):Promise.resolve(t.value).then(a,r);n((s=s.apply(t,e)).next())}));import{d as l,k as i,u as a,p as r,l as n,s as o}from"./index.6e27ae11.js";import{d as c,a3 as d,a7 as u,I as v,p as y,P as m,_ as p,q as g,$ as w,m as L,ad as f,r as x,o as b,e as h,g as $,t as k,i as N,F as C,f as T,A as I,T as V}from"./vendor.8ea4918e.js";/* empty css              */import{_ as j}from"./logo.9ad82163.js";(e=t||(t={})).getLotteryList="/app/lottery/record/",e.getStatistics="/app/lottery/statistics",e.draw="/app/lottery/draw";var _=c({name:"Lottery",components:{Button:d,Skeleton:u},setup(){const e=v({statistics:{},recordList:[],visible:!1,spinning:!0,winFlagVisible:!1,surplusLotteryNo:"",url:"",loading:!0,drawVisible:!1}),c={pageNo:1,pageSize:999};i();const d=y(o),u=a(),x=m(null),b=m(null),h=m(null);let $=m(null);const k=()=>{x.value.scrollTop>=b.value.scrollHeight-x.value.clientHeight-h.value.clientHeight?x.value.scrollTop=0:x.value.scrollTop++},N=()=>{l.get({url:t.getStatistics}).then((t=>{e.statistics.directInviteNo=t.directInviteNo,e.statistics.indirectInviteNo=t.indirectInviteNo,e.statistics.totalLotteryNo=t.totalLotteryNo,e.statistics.surplusLotteryNo=t.surplusLotteryNo,e.surplusLotteryNo=t.surplusLotteryNo,e.url="https://www.artbingo.com/?invite="+t.invitationCode}))},C=()=>{var i;N(),(i=c,l.get({url:t.getLotteryList,params:i})).then((t=>s(this,null,(function*(){var s;e.recordList=t.records,e.recordList.map((t=>{t.lotteryTime=t.lotteryTime.replace(/-/g,"."),t.lotteryTime=t.lotteryTime.substring(0,t.lotteryTime.length-3)})),e.loading=!1,yield f(),e.recordList.length>8&&(s=100,x.value.scrollTop=0,$.value=setInterval(k,s),x.value.onmouseover=function(){clearInterval($.value)},x.value.onmouseout=function(){$.value=setInterval(k,s)})}))))};return p((()=>{var t;(null==(t=d.state.user)?void 0:t.isLogin)&&C()})),g((()=>{var t;return null==(t=d.state.user)?void 0:t.isLogin}),((t,e)=>{!0===t&&C()})),w((()=>{clearInterval($.value)})),{state:e,draw:()=>{0!=e.statistics.surplusLotteryNo?l.get({url:t.draw}).then((t=>s(this,null,(function*(){e.visible=!0,e.statistics.surplusLotteryNo=e.statistics.surplusLotteryNo-1,e.surplusLotteryNo=e.surplusLotteryNo-1,"1"===t.winFlag?(yield clearInterval($.value),C(),e.winFlagVisible=!0):e.winFlagVisible=!1})))):e.drawVisible=!0},gofavour:()=>{u(r.user+"?i=3")},changevisible:()=>{e.visible=!1},getStatis:N,goMark:t=>{u(`${r.market}/${t.artId}`)},scrolltopDiv:x,scrolltopList:b,scrolltopItem:h,isLogin:L((()=>{var t;return null==(t=d.state.user)?void 0:t.isLogin})),gouser:()=>{d.commit("setUseri",2),u(r.user)},copy:()=>{var t;(null==(t=d.state.user)?void 0:t.isLogin)?n(e.url):d.commit("setLoginVisible",!0)},changedrawVisible:()=>{e.drawVisible=!1}}}});const F={class:"lottery flex flex-col"},z={class:"\n        lottery-banner\n        flex\n        items-center\n        justify-center\n        h-5.44\n        md:h-4.8 md:flex-row\n        flex-col\n        pt-6\n        md:pt-0\n      "},S=$("div",{class:"lottery-banner-l md:max-w-3.18 md:max-h-2.4 max-w-2.65 max-h-2 mb-32px md:mb-0"},[$("img",{src:"/assets/banner.87aa4f6f.png",alt:"",srcset:""})],-1),D={class:"lottery-banner-r-txt"},q={key:0,class:"pt-15 pb-15 pr-0 pl-0 sm:p-15 w-full sm:w-1/2 md:w-1/3"},H={key:1,class:"lottery-main-content w-full flex-wrap lg:w-3/5"},P={class:"lottery-main-content-top flex-wrap justify-center"},M={class:"lottery-main-content-top-l w-full"},A={class:"content conter-border"},B={class:"content-title"},R={class:"content-value"},U={class:"content conter-border"},E={class:"content-title"},G={class:"content-value"},J={class:"content conter-border"},K={class:"content-title"},O={class:"content-value"},Q={class:"content"},W={class:"content-title"},X={class:"content-value content-color"},Y=$("div",{class:"w-bor hidden md:block"},null,-1),Z={class:"lottery-main-content-bot"},tt={class:"flex justify-items-stretch flex-wrap"},et={class:"t-l t-title"},st={style:{"margin-right":"auto"},class:"t-c t-title justify-self-start"},lt=$("div",{class:"t-r t-title"},null,-1),it={ref:"scrolltopDiv",class:"scrolltopDiv demo-list"},at={ref:"scrolltopList",class:"scrolltopList rowup"},rt={class:"t-l t-content-l sm:text-16 text-12"},nt={class:"t-c t-content-c sm:text-16 truncate text-12",style:{"margin-right":"auto"}},ot={class:"t-r t-content-r sm:text-16 text-12"},ct={class:"container mx-auto"},dt={class:"lottery-main-sider-span"},ut={class:"mb-10px"},vt={class:"flex"},yt=$("div",null,"1.",-1),mt={class:"flex"},pt=$("div",null,"2.",-1),gt={class:"flex"},wt=$("div",null,"3.",-1),Lt={class:"flex"},ft=$("div",null,"4.",-1),xt={class:"flex"},bt=$("div",null,"5.",-1),ht={class:"mb-10px"},$t={class:"lottery-main-sider-span"},kt=$("div",null,"2021.08.10",-1),Nt={class:"lottery-main-sider-span"},Ct={class:"bg fixed inset-0 z-10"},Tt={class:"z-20 fixed bgfixed"},It={class:"flaw-img md:px-0.4"},Vt={key:0,class:"text-white"},jt={key:1,class:"text-white"},_t={key:2,class:"flex flex-wrap drew-btn justify-center"},Ft={key:3,class:"flex flex-wrap drew-btn justify-center"},zt={class:"z-20 fixed bgfixed"},St={class:"daw flex flex-col items-center"},Dt={class:"daw-img"},qt={class:"margin-tb draw-title"},Ht=$("div",{class:"draw-num"},"0",-1),Pt={class:"margin-tb draw-title"},Mt=$("div",{class:"margin-tb daw-bor"},null,-1);_.render=function(t,e){const s=x("Skeleton");return b(),h("div",F,[$("div",z,[S,$("div",{onClick:e[1]||(e[1]=(...e)=>t.copy&&t.copy(...e)),class:"cursor-pointer lottery-banner-r md:max-w-6.17 max-w-3.17 flex items-center flex-col"},[$("img",{class:"max-h-0.56 md:max-h-0.9",src:t.$t("images.lottery_banner_title"),alt:"",srcset:""},null,8,["src"]),$("span",D,k(t.$t("Lottery.bannerTxt")),1),$("img",{class:"yqimg",src:t.$t("images.lottery_banner_button"),alt:"",srcset:""},null,8,["src"])])]),$("div",{class:["lottery-main flex lg:justify-between flex-wrap sm:px-8.7 px-lg",t.isLogin?"":"py-5% md:px-20%"]},[t.state.loading&&t.isLogin?(b(),h("article",q,[$(s,{loading:!0,active:""})])):!t.state.loading&&t.isLogin?(b(),h("div",H,[$("div",P,[$("div",M,[$("div",A,[$("div",B,k(t.$t("Lottery.statistics.title1")),1),$("div",R,[N(k(t.state.statistics.directInviteNo)+" ",1),$("span",null,k(t.$t("Lottery.people")),1)])]),$("div",U,[$("div",E,k(t.$t("Lottery.statistics.title2")),1),$("div",G,[N(k(t.state.statistics.indirectInviteNo)+" ",1),$("span",null,k(t.$t("Lottery.people")),1)])]),$("div",J,[$("div",K,k(t.$t("Lottery.statistics.title3")),1),$("div",O,[N(k(t.state.statistics.totalLotteryNo)+" ",1),$("span",null,k(t.$t("Lottery.sec")),1)])]),$("div",Q,[$("div",W,k(t.$t("Lottery.statistics.title4")),1),$("div",X,[N(k(t.state.statistics.surplusLotteryNo)+" ",1),$("span",null,k(t.$t("Lottery.sec")),1)])])])]),Y,$("div",Z,[$("div",tt,[$("div",et,k(t.$t("Lottery.luckyDrawTime")),1),$("div",st,k(t.$t("Lottery.worksName")),1),lt]),$("div",it,[$("div",at,[(b(!0),h(C,null,T(t.state.recordList,(e=>(b(),h("div",{ref:"scrolltopItem",class:"flex flex-wrap lottery-main-content-bot-content item_txt",key:e.id},[$("div",rt,k(e.lotteryTime),1),$("div",nt,k(e.artName),1),$("div",ot,[N(k("1"===e.winFlag?"":t.$t("Lottery.status0"))+" ",1),"1"===e.winFlag?(b(),h("a",{key:0,onClick:s=>t.goMark(e)},k(t.$t("Lottery.fragment")),9,["onClick"])):I("",!0)])],512)))),128))],512)],512)])])):I("",!0),$("div",{class:["lottery-main-sider w-full flex-wrap",t.isLogin?" lg:w-4/12":"w-full"]},[t.isLogin?(b(),h("div",{key:0,onClick:e[2]||(e[2]=(...e)=>t.draw&&t.draw(...e)),class:"sm:w-full lottery-main-content-top-r"},[$("img",{src:t.$t("images.lottery_button"),alt:"",srcset:""},null,8,["src"])])):I("",!0),$("div",ct,[$("span",dt,k(t.$t("Lottery.activityRules")),1),$("ul",ut,[$("li",vt,[yt,$("span",null,k(t.$t("Lottery.rulesList.rule2")),1)]),$("li",mt,[pt,$("span",null,k(t.$t("Lottery.rulesList.rule3")),1)]),$("li",gt,[wt,$("span",null,k(t.$t("Lottery.rulesList.rule4")),1)]),$("li",Lt,[ft,$("span",null,k(t.$t("Lottery.rulesList.rule5")),1)]),$("li",xt,[bt,$("span",null,k(t.$t("Lottery.rulesList.rule6")),1)])]),$("div",ht,[$("span",$t,k(t.$t("Lottery.activityTime")),1),kt]),$("div",null,[$("span",Nt,k(t.$t("Lottery.rewardContent")),1),$("div",null,k(t.$t("Lottery.rewardContenttxt")),1)])])],2)],2),t.state.visible?(b(),h(V,{key:0,to:"body"},[$("div",Ct,[$("div",Tt,[$("div",It,[t.state.winFlagVisible?(b(),h("img",{key:0,onClick:e[3]||(e[3]=(...e)=>t.changevisible&&t.changevisible(...e)),src:"/assets/prizebox.f84fff80.png",alt:""})):(b(),h("img",{key:1,onClick:e[4]||(e[4]=(...e)=>t.changevisible&&t.changevisible(...e)),src:"/assets/box.d1212abc.png",alt:""}))]),t.state.winFlagVisible?(b(),h("div",Vt,k(t.$t("Lottery.winningText")),1)):(b(),h("div",jt,k(t.$t("Lottery.nowinningText")),1)),t.state.winFlagVisible?(b(),h("div",_t,[$("button",{class:"rounded-md",onClick:e[5]||(e[5]=(...e)=>t.gofavour&&t.gofavour(...e))},k(t.$t("Lottery.drawConntent")),1),$("button",{onClick:e[6]||(e[6]=(...e)=>t.changevisible&&t.changevisible(...e)),class:"rounded-md"},k(t.$t("Lottery.drawConntent2"))+k(t.state.surplusLotteryNo)+k(t.$t("Lottery.drawConntent2_2")),1)])):(b(),h("div",Ft,[$("button",{onClick:e[7]||(e[7]=(...e)=>t.changevisible&&t.changevisible(...e)),class:"rounded-md"},k(t.$t("Lottery.nodraw"))+k(t.state.surplusLotteryNo)+k(t.$t("Lottery.nodraw2")),1)]))])])])):I("",!0),t.state.drawVisible?(b(),h(V,{key:1,to:"body"},[$("div",{class:"bg fixed inset-0 z-10",onClick:e[10]||(e[10]=(...e)=>t.changedrawVisible&&t.changedrawVisible(...e))},[$("div",zt,[$("div",St,[$("div",Dt,[$("img",{onClick:e[8]||(e[8]=(...e)=>t.draw&&t.draw(...e)),src:j,alt:""})]),$("div",qt,k(t.$t("Lottery.dawNumTxt")),1),Ht,$("div",Pt,k(t.$t("Lottery.dawNumTxt2")),1),Mt,$("img",{onClick:e[9]||(e[9]=(...e)=>t.gouser&&t.gouser(...e)),class:"yqimg",src:t.$t("images.lottery_draw_button"),alt:"",srcset:""},null,8,["src"])])])])])):I("",!0)])};export default _;
